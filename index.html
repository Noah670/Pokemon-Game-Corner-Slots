<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pok√©mon Game Corner Slots</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
  </head>
  <body class="min-h-screen">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useEffect, useRef, useState } = React;

      function PokemonSlots() {
        const [balance, setBalance] = useState(100);
        const [reels, setReels] = useState([
          ["7", "üíé", "üîî"],
          ["‚≠ê", "üçí", "BAR"],
          ["7", "7", "7"],
        ]);
        const [spinning, setSpinning] = useState([false, false, false]);
        const [bet, setBet] = useState(1);
        const [msg, setMsg] = useState("Ready to play!");
        const [wins, setWins] = useState(0);
        const [flash, setFlash] = useState(false);
        const [soundOn, setSoundOn] = useState(true);
        const [musicOn, setMusicOn] = useState(false);
        const [winSymbols, setWinSymbols] = useState([]);
        const [combo, setCombo] = useState(0);
        const [showCombo, setShowCombo] = useState(false);
        const [bonusMode, setBonusMode] = useState(false);
        const [particles, setParticles] = useState([]);
        const [location, setLocation] = useState({ x: 4, y: 4 });

        const townRef = useRef(null);

        const audioCtx = useRef(null);
        const musicTimer = useRef(null);
        const symbols = ["7", "üíé", "üîî", "‚≠ê", "üçí", "BAR"];
        const pays = { "7": 100, "üíé": 50, "üîî": 10, "‚≠ê": 10, "üçí": 10, "BAR": 5 };
        const townMap = [
          ["üå≤", "üå≤", "üè†", "üå≤", "üå≤", "üå≤", "üè™", "üå≤", "üå≤"],
          ["üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤"],
          ["üè†", "‚¨ú", "üé∞", "‚¨ú", "‚¨ú", "‚¨ú", "üè†", "‚¨ú", "üå≤"],
          ["üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤"],
          ["üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤", "üå≤", "‚¨ú", "‚¨ú", "üå≤"],
          ["üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤", "üå≤"],
          ["üå≤", "üè†", "‚¨ú", "‚¨ú", "üå≤", "‚¨ú", "‚¨ú", "‚¨ú", "üå≤"],
          ["üå≤", "üå≤", "üå≤", "‚¨ú", "üå≤", "üå≤", "‚¨ú", "üå≤", "üå≤"],
          ["üå≤", "üå≤", "üå≤", "üå≤", "üå≤", "üå≤", "üå≤", "üå≤", "üå≤"],
        ];

        const playMusic = () => {
          if (!musicOn || !audioCtx.current) return;
          const ctx = audioCtx.current;
          const melody = [
            [440, 0, 0.15],
            [554, 0.15, 0.15],
            [659, 0.3, 0.15],
            [554, 0.45, 0.15],
            [440, 0.6, 0.15],
            [659, 0.75, 0.15],
            [880, 0.9, 0.15],
            [659, 1.05, 0.15],
          ];
          const bass = [
            [110, 0, 0.3],
            [110, 0.6, 0.3],
            [138, 0.3, 0.3],
            [138, 0.9, 0.3],
          ];

          melody.forEach(([f, t, d]) => {
            const o = ctx.createOscillator();
            const g = ctx.createGain();
            o.connect(g);
            g.connect(ctx.destination);
            o.type = "square";
            o.frequency.value = f;
            g.gain.setValueAtTime(0.06, ctx.currentTime + t);
            g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + t + d);
            o.start(ctx.currentTime + t);
            o.stop(ctx.currentTime + t + d);
          });

          bass.forEach(([f, t, d]) => {
            const o = ctx.createOscillator();
            const g = ctx.createGain();
            o.connect(g);
            g.connect(ctx.destination);
            o.type = "sawtooth";
            o.frequency.value = f;
            g.gain.setValueAtTime(0.05, ctx.currentTime + t);
            g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + t + d);
            o.start(ctx.currentTime + t);
            o.stop(ctx.currentTime + t + d);
          });
        };

        useEffect(() => {
          if (musicOn) {
            if (!audioCtx.current) audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
            playMusic();
            musicTimer.current = setInterval(playMusic, 1200);
          } else if (musicTimer.current) {
            clearInterval(musicTimer.current);
          }
          return () => musicTimer.current && clearInterval(musicTimer.current);
        }, [musicOn]);

        useEffect(() => {
          if (!townRef.current || !window.THREE) return;
          const scene = new window.THREE.Scene();
          scene.background = new window.THREE.Color("#0f172a");
          const camera = new window.THREE.PerspectiveCamera(45, 1, 0.1, 100);
          camera.position.set(0, 2, 6);
          const renderer = new window.THREE.WebGLRenderer({ antialias: true, alpha: true });
          renderer.setSize(320, 220);
          townRef.current.innerHTML = "";
          townRef.current.appendChild(renderer.domElement);

          const light = new window.THREE.DirectionalLight(0xffffff, 1.2);
          light.position.set(3, 5, 2);
          scene.add(light);
          scene.add(new window.THREE.AmbientLight(0x7c3aed, 0.4));

          const plane = new window.THREE.Mesh(
            new window.THREE.PlaneGeometry(10, 10),
            new window.THREE.MeshStandardMaterial({ color: 0x1f2937 })
          );
          plane.rotation.x = -Math.PI / 2;
          scene.add(plane);

          const cube = new window.THREE.Mesh(
            new window.THREE.BoxGeometry(1, 1, 1),
            new window.THREE.MeshStandardMaterial({ color: 0xec4899 })
          );
          cube.position.y = 0.6;
          scene.add(cube);

          let animationId;
          const animate = () => {
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
            animationId = requestAnimationFrame(animate);
          };
          animate();

          return () => {
            cancelAnimationFrame(animationId);
            renderer.dispose();
          };
        }, []);

        const sound = (type, pitch = 1) => {
          if (!soundOn) return;
          if (!audioCtx.current) audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
          const ctx = audioCtx.current;
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.connect(g);
          g.connect(ctx.destination);
          const s =
            {
              spin: ["triangle", 220, 110, 0.15, 0.3],
              stop: ["sine", 180, 180, 0.2, 0.25],
              win: ["square", [[523, 659, 784], [0, 0.1, 0.2]], 0, 0.35, 0.3],
              bigwin: ["square", [[523, 659, 784, 1047], [0, 0.1, 0.2, 0.3]], 0, 0.5, 0.4],
              coin: ["sine", 880, 660, 0.06, 0.2],
              button: ["square", 350, 350, 0.05, 0.15],
              combo: ["triangle", [[440, 554, 659], [0, 0.08, 0.16]], 0, 0.3, 0.35],
              bonus: ["sawtooth", [[330, 523, 784], [0, 0.15, 0.3]], 0, 0.5, 0.4],
            }[type] || ["sine", 440, 440, 0.1, 0.2];
          o.type = s[0];
          if (Array.isArray(s[1])) {
            s[1][0].forEach((f, i) => o.frequency.setValueAtTime(f * pitch, ctx.currentTime + s[1][1][i]));
          } else {
            o.frequency.setValueAtTime(s[1] * pitch, ctx.currentTime);
            if (s[1] !== s[2]) o.frequency.exponentialRampToValueAtTime(s[2] * pitch, ctx.currentTime + s[3]);
          }
          g.gain.setValueAtTime(s[4], ctx.currentTime);
          g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + s[3]);
          o.start(ctx.currentTime);
          o.stop(ctx.currentTime + s[3]);
        };

        const addParticles = (n) => {
          const p = Array(n)
            .fill()
            .map((_, i) => ({
              id: Date.now() + i,
              x: Math.random() * 100,
              y: 50,
              emoji: ["‚ú®", "‚≠ê", "üí´", "üåü"][Math.floor(Math.random() * 4)],
              delay: Math.random() * 0.5,
            }));
          setParticles((prev) => [...prev, ...p]);
          setTimeout(
            () => setParticles((prev) => prev.filter((x) => !p.find((y) => y.id === x.id))),
            2000
          );
        };

        const makeReels = () =>
          Array(3)
            .fill()
            .map(() => Array(3).fill().map(() => symbols[Math.floor(Math.random() * symbols.length)]));

        const spin = () => {
          if (balance < bet || spinning.some((s) => s)) return;
          sound("spin");
          setBalance((b) => parseFloat((b - bet).toFixed(2)));
          setSpinning([true, true, true]);
          setMsg("Spinning...");
          setWinSymbols([]);
          const final = makeReels();
          [1200, 1800, 2400].forEach((delay, i) => {
            setTimeout(() => {
              sound("stop", 1 + i * 0.1);
              setSpinning((s) => {
                const n = [...s];
                n[i] = false;
                return n;
              });
              if (i === 2) setTimeout(() => {
                setReels(final);
                checkWin(final);
              }, 100);
            }, delay);
          });
        };

        const checkWin = (r) => {
          let total = 0;
          let count = 0;
          const lines = [[r[0][1], r[1][1], r[2][1]]];
          if (bet >= 5) lines.push([r[0][0], r[1][0], r[2][0]], [r[0][2], r[1][2], r[2][2]]);
          if (bet >= 10) lines.push([r[0][0], r[1][1], r[2][2]], [r[0][2], r[1][1], r[2][0]]);
          const winning = [];
          lines.forEach((l) => {
            if (l[0] === l[1] && l[1] === l[2]) {
              let amt = bet * (pays[l[0]] || 0);
              if (combo > 0) amt = Math.floor(amt * (1 + combo * 0.25));
              if (bonusMode) amt *= 2;
              total += amt;
              count += 1;
              winning.push(l[0]);
            }
          });
          if (total > 0) {
            const newCombo = combo + 1;
            setCombo(newCombo);
            setShowCombo(true);
            setTimeout(() => setShowCombo(false), 2000);
            if (newCombo === 5 && !bonusMode) {
              setBonusMode(true);
              sound("bonus");
              setMsg("üî• BONUS MODE! 2X WINS! üî•");
            } else if (total >= bet * 50) {
              sound("bigwin");
              setMsg(`üíé BIG WIN! $${total.toFixed(2)}!`);
            } else {
              sound("win");
              setMsg(`üé∞ WIN! $${total.toFixed(2)}!`);
            }
            if (newCombo >= 3) {
              sound("combo");
              addParticles(newCombo * 3);
            }
            setWinSymbols(winning);
            setFlash(true);
            setTimeout(() => setFlash(false), 600);
            let curr = 0;
            const iv = setInterval(() => {
              curr += total / 15;
              if (curr >= total) {
                setBalance((b) => parseFloat((b + total).toFixed(2)));
                clearInterval(iv);
              } else {
                sound("coin");
              }
            }, 50);
            setWins((w) => w + 1);
          } else {
            setCombo(0);
            setBonusMode(false);
            setMsg("No match. Try again!");
          }
        };

        const Reel = ({ isSpinning }) => {
          const [d, setD] = useState(
            Array(8)
              .fill()
              .map(() => symbols[Math.floor(Math.random() * symbols.length)])
          );
          useEffect(() => {
            if (isSpinning) {
              const iv = setInterval(
                () => setD(Array(8).fill().map(() => symbols[Math.floor(Math.random() * symbols.length)])),
                75
              );
              return () => clearInterval(iv);
            }
            return undefined;
          }, [isSpinning]);
          return (
            <div className="h-48 sm:h-64 md:h-80 overflow-hidden bg-gradient-to-b from-gray-50 via-white to-gray-50 rounded-lg border-2 sm:border-4 border-gray-900 relative shadow-inner crt">
              <div className={isSpinning ? "reel-spin" : "transition-all duration-500"}>
                {d.map((s, i) => (
                  <div
                    key={i}
                    className="h-16 sm:h-20 md:h-24 flex items-center justify-center text-3xl sm:text-4xl md:text-5xl border-b border-gray-300 bg-white"
                    style={{
                      textShadow: "3px 3px 6px rgba(0,0,0,.5),0 0 12px rgba(255,255,255,.6)",
                      filter: "contrast(1.15) brightness(1.05)",
                    }}
                  >
                    {s}
                  </div>
                ))}
              </div>
            </div>
          );
        };

        return (
          <div className="min-h-screen bg-gradient-to-b from-slate-950 via-indigo-950 to-purple-950 p-2 sm:p-4 relative overflow-hidden">
            <style>{`
              .reel-spin{animation:spin .075s linear infinite;filter:blur(2.5px) brightness(.95)}
              @keyframes spin{0%{transform:translateY(0)}100%{transform:translateY(-100%)}}
              .balance-flash{animation:flash .6s ease-out}
              @keyframes flash{0%,100%{transform:scale(1)}50%{transform:scale(1.15);filter:brightness(1.5) drop-shadow(0 0 20px gold)}}
              .win-pulse{animation:pulse .7s ease-in-out infinite}
              @keyframes pulse{0%,100%{transform:scale(1);filter:brightness(1) drop-shadow(0 0 5px gold)}50%{transform:scale(1.12);filter:brightness(1.5) drop-shadow(0 0 20px gold)}}
              .crt::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(0deg,rgba(0,0,0,.08) 0,rgba(0,0,0,.08) 1px,transparent 1px,transparent 2.5px);pointer-events:none;z-index:10}
              .crt::after{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at center,transparent 30%,rgba(0,0,0,.2) 100%);pointer-events:none;z-index:11}
              .gba::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(0deg,rgba(0,0,0,.06) 0,rgba(0,0,0,.06) 1.5px,transparent 1.5px,transparent 3.5px);pointer-events:none;z-index:10;opacity:.5}
              .gba::after{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at center,transparent 50%,rgba(0,0,0,.25) 100%);pointer-events:none;z-index:11}
              .btn{box-shadow:inset 0 2px 0 rgba(255,255,255,.35),inset 0 -2px 0 rgba(0,0,0,.25),0 7px 0 #1f2937,0 9px 15px rgba(0,0,0,.5)}
              .btn:active:not(:disabled){transform:translateY(5px);box-shadow:inset 0 2px 0 rgba(255,255,255,.35),inset 0 -2px 0 rgba(0,0,0,.25),0 2px 0 #1f2937}
              .lcd{text-shadow:0 0 10px rgba(34,211,238,.9),0 0 20px rgba(34,211,238,.5)}
              .money{text-shadow:0 0 10px rgba(34,197,94,.8),0 0 20px rgba(34,197,94,.5),2px 2px 4px rgba(0,0,0,.8)}
              .pulse-b{animation:pb 3s ease-in-out infinite}
              @keyframes pb{0%,100%{border-color:rgba(6,182,212,.7);box-shadow:0 0 25px rgba(6,182,212,.5)}50%{border-color:rgba(147,51,234,.9);box-shadow:0 0 35px rgba(147,51,234,.7)}}
              .bonus-glow{animation:bonus 1s ease-in-out infinite}
              @keyframes bonus{0%,100%{box-shadow:0 0 20px rgba(255,215,0,.8),inset 0 0 20px rgba(255,215,0,.3)}50%{box-shadow:0 0 40px rgba(255,215,0,1),inset 0 0 30px rgba(255,215,0,.5)}}
              .particle{animation:fall 2s ease-out forwards}
              @keyframes fall{0%{transform:translateY(0) rotate(0deg);opacity:1}100%{transform:translateY(300px) rotate(360deg);opacity:0}}
              .combo-pop{animation:pop .5s ease-out}
              @keyframes pop{0%{transform:scale(0) rotate(-180deg)}50%{transform:scale(1.2) rotate(10deg)}100%{transform:scale(1) rotate(0)}}
              .grid{background:linear-gradient(0deg,transparent 24%,rgba(147,51,234,.3) 25%,rgba(147,51,234,.3) 26%,transparent 27%,transparent 74%,rgba(147,51,234,.3) 75%,rgba(147,51,234,.3) 76%,transparent 77%),linear-gradient(90deg,transparent 24%,rgba(147,51,234,.3) 25%,rgba(147,51,234,.3) 26%,transparent 27%,transparent 74%,rgba(147,51,234,.3) 75%,rgba(147,51,234,.3) 76%,transparent 77%);background-size:50px 50px;opacity:.2;animation:grid-move 20s linear infinite}
              @keyframes grid-move{0%{background-position:0 0}100%{background-position:50px 50px}}
      `}</style>

            <div className="fixed inset-0 grid pointer-events-none"></div>

            {particles.map((p) => (
              <div
                key={p.id}
                className="fixed text-3xl particle pointer-events-none z-50"
                style={{ left: `${p.x}%`, top: `${p.y}%`, animationDelay: `${p.delay}s` }}
              >
                {p.emoji}
              </div>
            ))}

            {showCombo && combo >= 2 && (
              <div className="fixed top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 combo-pop">
                <div
                  className={`text-5xl sm:text-7xl font-bold px-6 py-3 rounded-2xl border-4 ${
                    bonusMode
                      ? "bg-gradient-to-r from-yellow-400 to-orange-500 border-yellow-600 bonus-glow"
                      : "bg-gradient-to-r from-purple-600 to-pink-600 border-purple-800"
                  }`}
                  style={{ textShadow: "4px 4px 8px rgba(0,0,0,.8)" }}
                >
                  <div className="text-white">COMBO √ó{combo}</div>
                  {bonusMode && <div className="text-yellow-200 text-2xl mt-2">üî• BONUS üî•</div>}
                </div>
              </div>
            )}

            <div className="max-w-2xl mx-auto relative z-10">
              <div className="mb-6 rounded-2xl border-4 border-emerald-700 bg-gradient-to-b from-emerald-500/80 to-emerald-700/80 p-4 shadow-2xl">
                <div className="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
                  <div>
                    <h2 className="text-lg sm:text-2xl font-bold text-yellow-100">Celadon City Explorer</h2>
                    <p className="text-xs sm:text-sm text-emerald-100">
                      Use the D-pad to move. üé∞ marks the Game Corner.
                    </p>
                  </div>
                  <div className="flex justify-center">
                    <div ref={townRef} className="rounded-xl border-2 border-emerald-300/70 shadow-lg"></div>
                  </div>
                </div>

                <div className="mt-4 rounded-xl bg-emerald-950/70 p-3">
                  {townMap.map((row, y) => (
                    <div key={`row-${y}`} className="flex justify-center">
                      {row.map((tile, x) => (
                        <div
                          key={`${x}-${y}`}
                          className="flex h-8 w-8 items-center justify-center text-sm sm:text-base"
                        >
                          {location.x === x && location.y === y ? "üßç" : tile}
                        </div>
                      ))}
                    </div>
                  ))}
                </div>

                <div className="mt-4 grid grid-cols-3 gap-2 max-w-[200px] mx-auto">
                  <button
                    className="col-start-2 rounded-lg bg-emerald-600 py-2 text-white shadow"
                    onClick={() =>
                      setLocation((pos) => ({
                        x: pos.x,
                        y: Math.max(0, pos.y - 1),
                      }))
                    }
                  >
                    ‚Üë
                  </button>
                  <button
                    className="rounded-lg bg-emerald-600 py-2 text-white shadow"
                    onClick={() =>
                      setLocation((pos) => ({
                        x: Math.max(0, pos.x - 1),
                        y: pos.y,
                      }))
                    }
                  >
                    ‚Üê
                  </button>
                  <button
                    className="rounded-lg bg-emerald-600 py-2 text-white shadow"
                    onClick={() =>
                      setLocation((pos) => ({
                        x: pos.x,
                        y: Math.min(townMap.length - 1, pos.y + 1),
                      }))
                    }
                  >
                    ‚Üì
                  </button>
                  <button
                    className="rounded-lg bg-emerald-600 py-2 text-white shadow"
                    onClick={() =>
                      setLocation((pos) => ({
                        x: Math.min(townMap[0].length - 1, pos.x + 1),
                        y: pos.y,
                      }))
                    }
                  >
                    ‚Üí
                  </button>
                </div>
              </div>

              <div className="bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-600 rounded-t-xl sm:rounded-t-2xl p-3 sm:p-6 border-4 border-green-700 shadow-2xl relative overflow-hidden">
                <div className="absolute inset-0 bg-gradient-to-b from-white/30 to-transparent"></div>
                <div className="flex justify-between items-center relative z-10">
                  <div className="flex items-center gap-2 sm:gap-3">
                    <span className="text-3xl sm:text-5xl">üíµ</span>
                    <div className="flex flex-col">
                      <span className="text-[10px] sm:text-xs text-green-950 font-bold">BALANCE</span>
                      <span
                        className={`text-2xl sm:text-4xl font-bold money ${flash ? "balance-flash" : ""}`}
                        style={{ fontFamily: "monospace", color: "#052e16" }}
                      >
                        ${balance.toFixed(2)}
                      </span>
                    </div>
                  </div>
                  <div className="flex gap-2">
                    <button
                      onClick={() => {
                        sound("button");
                        setMusicOn(!musicOn);
                      }}
                      className="bg-white/40 hover:bg-white/50 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg shadow-lg border-2 border-white/60 transition"
                    >
                      <span className="text-lg sm:text-xl">üéµ</span>
                    </button>
                    <button
                      onClick={() => {
                        sound("button");
                        setSoundOn(!soundOn);
                      }}
                      className="bg-white/40 hover:bg-white/50 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg shadow-lg border-2 border-white/60 transition"
                    >
                      <span className="text-lg sm:text-xl">{soundOn ? "üîä" : "üîá"}</span>
                    </button>
                    <div className="flex items-center gap-1.5 sm:gap-2 bg-white/40 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg shadow-lg border-2 border-white/60">
                      <span className="text-lg sm:text-2xl">üèÜ</span>
                      <div className="flex flex-col">
                        <span className="text-[8px] sm:text-[10px] text-green-950 font-bold leading-none">WINS</span>
                        <span className="font-bold text-sm sm:text-lg leading-none text-green-950">{wins}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-gradient-to-b from-purple-950 via-indigo-950 to-slate-950 p-3 sm:p-8 rounded-b-xl sm:rounded-b-2xl border-x-4 border-b-4 border-purple-800 shadow-2xl">
                <div
                  className={`bg-gradient-to-b from-indigo-950 to-purple-950 p-4 sm:p-8 rounded-2xl sm:rounded-3xl border-4 ${
                    bonusMode ? "bonus-glow border-yellow-500" : "pulse-b"
                  }`}
                >
                  <div className="flex justify-between gap-2 mb-3 sm:mb-6">
                    <div className="bg-slate-950/95 text-green-400 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg border-2 border-green-500 text-[10px] sm:text-xs font-bold shadow-lg money flex-1 text-center">
                      ${balance.toFixed(2)}
                    </div>
                    {combo > 0 && (
                      <div
                        className="bg-slate-950/95 text-yellow-300 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg border-2 border-yellow-500 text-[10px] sm:text-xs font-bold shadow-lg flex-1 text-center"
                        style={{ textShadow: "0 0 10px rgba(253,224,71,.9)" }}
                      >
                        COMBO √ó{combo}
                      </div>
                    )}
                    <div className="bg-slate-950/95 text-cyan-300 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg border-2 border-cyan-500 text-[10px] sm:text-xs font-bold shadow-lg lcd flex-1 text-center">
                      BET: ${bet}
                    </div>
                  </div>

                  <div
                    className={`bg-gradient-to-b from-pink-500 via-pink-600 to-pink-800 text-center py-3 sm:py-6 rounded-xl sm:rounded-2xl mb-3 sm:mb-6 border-4 border-gray-900 text-base sm:text-xl text-yellow-50 shadow-lg font-bold relative overflow-hidden ${
                      bonusMode ? "bonus-glow" : ""
                    }`}
                    style={{ boxShadow: "inset 0 3px 0 rgba(255,255,255,.4),0 8px 0 rgba(15,23,42,.6)" }}
                  >
                    <div className="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div>
                    <div className="relative z-10">
                      <div className="text-xs sm:text-sm text-yellow-200 mb-1">‚òÖ POK√âMON ‚òÖ</div>
                      <div className="text-xl sm:text-2xl">GAME CORNER</div>
                      <div className="text-[10px] sm:text-xs text-pink-200 mt-1">CELADON CITY</div>
                    </div>
                  </div>

                  <div
                    className="relative rounded-xl sm:rounded-2xl p-3 sm:p-6 mb-3 sm:mb-6 gba"
                    style={{
                      background: "linear-gradient(180deg,#dfe9d5 0%,#f5f7f0 50%,#d5e3c8 100%)",
                      border: "4px solid #0f172a",
                      boxShadow: "inset 0 0 0 4px rgba(15,23,42,.4),inset 0 3px 10px rgba(0,0,0,.3),0 10px 20px rgba(0,0,0,.5)",
                    }}
                  >
                    <div className="grid grid-cols-3 gap-2 sm:gap-4 relative z-20">
                      {[0, 1, 2].map((col) => (
                        <div key={col}>
                          {spinning[col] ? (
                            <Reel isSpinning={true} />
                          ) : (
                            <div className="h-48 sm:h-64 md:h-80 bg-gradient-to-b from-gray-50 via-white to-gray-50 rounded-lg border-2 sm:border-4 border-gray-900 flex flex-col justify-around shadow-lg crt">
                              {[0, 1, 2].map((row) => (
                                <div
                                  key={row}
                                  className={`h-16 sm:h-20 md:h-24 flex items-center justify-center text-3xl sm:text-4xl md:text-5xl border-b border-gray-300 bg-white ${
                                    winSymbols.includes(reels[col][row]) ? "win-pulse" : ""
                                  }`}
                                  style={{
                                    textShadow: "3px 3px 6px rgba(0,0,0,.5),0 0 12px rgba(255,255,255,.6)",
                                    filter: "contrast(1.15) brightness(1.05)",
                                  }}
                                >
                                  {reels[col][row]}
                                </div>
                              ))}
                            </div>
                          )}
                        </div>
                      ))}
                    </div>
                  </div>

                  <div className="bg-slate-950/95 p-2 sm:p-4 rounded-lg sm:rounded-xl mb-3 sm:mb-6 border-2 border-purple-500 shadow-lg">
                    <p className="text-center text-yellow-300 text-xs sm:text-sm font-bold lcd">{msg}</p>
                  </div>

                  <div className="grid grid-cols-3 gap-2 sm:gap-3 mb-3 sm:mb-6">
                    {[1, 5, 10].map((b) => (
                      <button
                        key={b}
                        onClick={() => {
                          sound("button");
                          setBet(b);
                        }}
                        className={`p-3 sm:p-4 rounded-lg sm:rounded-xl text-xs sm:text-sm border-4 border-gray-900 transition font-bold btn ${
                          bet === b
                            ? "bg-gradient-to-b from-yellow-400 via-yellow-500 to-yellow-600"
                            : "bg-gradient-to-b from-purple-600 via-purple-700 to-purple-800"
                        }`}
                      >
                        <div className="text-[10px] sm:text-xs opacity-90">BET</div>
                        <div className="text-xl sm:text-3xl font-bold">${b}</div>
                        <div className="text-[8px] sm:text-[10px] opacity-75 mt-1">
                          {b === 1 ? "1 LINE" : b === 5 ? "3 LINES" : "5 LINES"}
                        </div>
                      </button>
                    ))}
                  </div>

                  <button
                    onClick={spin}
                    disabled={spinning.some((s) => s) || balance < bet}
                    className="w-full bg-gradient-to-b from-red-500 via-red-600 to-red-800 p-5 sm:p-8 rounded-xl sm:rounded-2xl text-xl sm:text-3xl border-4 border-gray-900 disabled:opacity-50 disabled:cursor-not-allowed hover:from-red-400 hover:to-red-700 transition font-bold text-white btn shadow-2xl relative overflow-hidden"
                    style={{ textShadow: "3px 3px 6px rgba(0,0,0,.7)" }}
                  >
                    <div className="absolute inset-0 bg-gradient-to-b from-white/25 to-transparent"></div>
                    <div className="relative z-10">
                      {spinning.some((s) => s) ? "‚ü≥ SPINNING..." : "‚ñ∂ SPIN"}
                    </div>
                  </button>

                  <div className="mt-4 sm:mt-6 bg-slate-950/95 p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 border-cyan-500 shadow-lg">
                    <h3 className="text-[10px] sm:text-xs text-cyan-300 mb-2 font-bold lcd text-center">‚òÖ PAYOUT TABLE ‚òÖ</h3>
                    <div className="grid grid-cols-2 gap-1.5 sm:gap-2 text-xs sm:text-sm">
                      {Object.entries(pays).map(([sym, pay]) => (
                        <div
                          key={sym}
                          className="text-white font-semibold bg-slate-800/50 rounded p-1.5 sm:p-2 flex items-center justify-between border border-slate-700"
                        >
                          <span className="text-xl sm:text-2xl">{sym}</span>
                          <span className="text-yellow-300">√ó3 = {pay}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<PokemonSlots />);
    </script>
  </body>
</html>
